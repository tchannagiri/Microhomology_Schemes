
<body>
  <div style="font-size: 20">
    <label>HGuide:</label>
    <select name="hguide" id="hguide" onchange="update_microhomologies()">
      <option value="HG39">HGuide3.9</option>
      <option value="HG42">HGuide4.2</option>
    </select>
    <label>Strand:</label>
    <select name="strand" id="strand" onchange="update_microhomologies()">
      <option value="R1">R1</option>
      <option value="R2">R2</option>
    </select>
    <label>Treatment:</label>
    <select name="treatment" id="treatment" onchange="update_microhomologies()">
      <option value="spliced">Spliced</option>
      <option value="noCMV">No-CMV</option>
      <option value="nonspliced">Non-spliced</option>
    </select>
    <label>Microhomology group:</label>
    <select name="microhomology_group" id="microhomology_group" onchange="update_microhomologies()">
      <option value="all">All</option>
      <option value="G1">Group 1: Exon / Exon</option>
      <option value="G2">Group 2: Exon / Intron (all)</option>
      <option value="G3">Group 3: Exon / Intron (no branch)</option>
      <option value="G4">Group 4: Exon / Branch site</option>
      <option value="G5">Group 5: Exon / Exon (no 6bp)</option>
    </select>
    <label>Display format:</label>
    <select name="combined" id="combined" onchange="update_microhomologies()">
      <option value="combined" selected>Combined</option>
      <option value="separate">Separate</option>
    </select>
  </div>
  <div style="font-size: 30; margin-bottom: 50;" id="title">
  </div>
  <div id="schemes">
  </div>
</body>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="schemes_data.js"></script>

<script src="schemes.js"></script>

<script>
  function update_microhomologies() {
    var hguide = document.querySelector("#hguide");
    var strand = document.querySelector("#strand");
    var treatment = document.querySelector("#treatment");
    var microhomology_group = document.querySelector("#microhomology_group");
    var combined = document.querySelector("#combined");
    document.querySelector("#title").innerHTML = (
      `${hguide.options[hguide.selectedIndex].innerHTML} ` +
      `${strand.value} ` +
      `${treatment.options[treatment.selectedIndex].innerHTML} ` +
      `Microhomologies (${combined.value})`
    );
    make_schemes(
      '#schemes',
      hguide.value,
      strand.value,
      treatment.value,
      microhomology_group.value,
      combined.value=="combined"
    );
  }

  window.addEventListener('load', () => update_microhomologies());
</script>